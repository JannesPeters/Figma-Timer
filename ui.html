<!-- <h2>Figma Timer</h2> -->
<!-- <p>Seconds: <input id="seconds" value="5"></p> -->
<html>
<style>
body {
  font: 10px sans-serif;
  text-align: center;
  margin: 10px;
}
button {
  border-radius: 5px;
  background: white;
  color: black;
  border: none;
  padding: 8px 12px;
  margin: 0 2px;
  box-shadow: inset 0 0 0 1px black;
  outline: none;
}

</style>
<button id="start" style="width: 70;">Start</button>
<button id="reset">Reset</button>
<button id="help">?</button>
<b id="helptext" hidden> <br /> <br /> Type the time you want to count down in "Timer: HH:MM:SS" format in any text field (e.g. Timer: 5:00) then press 'start' </b>

</html>
<script>

document.getElementById('start').onclick = () => {
  const textbox = document.getElementById('seconds');
  //const count = parseInt(textbox.value, 10);
  const count = 0; // placeholder variable for changing time from UI
  var currentButtonState = document.getElementById('start').textContent;
  var helptextvisible = 0;

  if (currentButtonState == "Start")
  {
    parent.postMessage({ pluginMessage: { type: 'start', count } }, '*');
    document.getElementById('start').textContent = 'Pause';
  } else if (currentButtonState == "Pause") {
    parent.postMessage({ pluginMessage: { type: 'pause', count } }, '*');
    document.getElementById('start').textContent = 'Continue';
  } else if (currentButtonState == "Continue") {
    parent.postMessage({ pluginMessage: { type: 'continue', count } }, '*');
    document.getElementById('start').textContent = 'Pause';
  }
}

document.getElementById('reset').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'reset' } }, '*')
  document.getElementById('start').textContent = 'Start';
}

document.getElementById('help').onclick = () => {
  if (document.getElementById('helptext').hidden == true)
  {
    document.getElementById('helptext').hidden = false;
    parent.postMessage({ pluginMessage: { type: 'helpon' } }, '*')
  } else {
    document.getElementById('helptext').hidden = true;
    parent.postMessage({ pluginMessage: { type: 'helpoff' } }, '*')
  }
}

onmessage = (event) => {
  console.log("got this from the plugin code", event.data.pluginMessage)
  // here i want to write some code that happens when user tries to edit timer text fields while paused
}
</script>
